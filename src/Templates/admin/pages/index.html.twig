{% extends 'layouts/base.html.twig' %}

{# if page is defined, extract the title and content from it #}
{% if page is defined %}
    {% set title = page.title %}
    {% set content = page.content %}
{% endif %}



{% block content %}
	<h1 class="text-4xl font-bold mb-4">Welcome to the Admin Dashboard</h1>
	<p class="mb-4">This is the admin dashboard. You can manage your pages and posts here.</p>

	{# list of pages #}
	<h2 class="text-2xl font-bold mb-4">Pages</h2>
	<div class="mb-4 bg-white shadow-md rounded px-8 pt-6 pb-8">
		<table class="w-full">
			<thead>
				<tr>
				</tr>
			</thead>
			<tbody>
				{% for page in pages %}
					<tr>
						<td>{{ page }}</td>
						<td>
							<div class="text-center">
								<a href="/admin/pages/edit/{{ page }}" class="text-blue-500 hover:text-blue-700">Edit</a>
							</div>
						</td>
						<td>
							<div class="text-center">
								<a href="/{{ page }}" class="text-green-500 hover:text-green-700">View</a>
							</div>
						</td>
						<td>
							<div class="text-center">
								<a href="/admin/pages/delete/{{ page }}" class="text-red-500 hover:text-red-700">Delete</a>
							</div>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>

	{% if pages|length == 0 %}
		<p class="mb-3">No pages found.</p>
	{% endif %}

	<h2 class="text-2xl font-bold mt-8 mb-4">Create a new page</h2>

	{% if message %}
		<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4 mt-4" role="alert">
			<strong class="font-bold">Success!</strong>
			<span class="block sm:inline">{{ message }}</span>

			{% if url %}
				<a href="{{ url }}" class="text-blue-500 hover:text-blue-700">View page</a>
			{% endif %}
		</div>
	{% endif %}

	<!-- A form with an input field for the page title, a textarea for the page content and a submit button -->
	<form action="/admin/pages/save" method="post" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 mt-4">
		<div class="mb-4">
			<label for="title" class="block mb-2">Page Title</label>
			<input type="text" name="title" id="title" class="w-full border border-gray-400 p-2 rounded" value="{{ title }}">
		</div>
		<div class="mb-4">
			<label for="content" class="block mb-2">Page Content</label>
			<textarea name="content" id="content" cols="30" rows="10" class="w-full border border-gray-400 p-2 rounded">{{ content }}</textarea>
		</div>
		<button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
            {{ page is defined ? 'Update' : 'Create' }} Page
        </button>
	</form>
{% endblock %}
